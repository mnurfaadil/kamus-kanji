import{M as H,F as N,aj as W,O as B,G as P,E as Z,e as K,k as ee,I as ae,J as re,K as V,N as O,X as b,au as ne,av as se,Q as k,T as te,R as le,aw as G,a1 as fe,C as ie,ax as j,ay as ue,V as L,W as ve,az as oe,aA as S,ai as X,aB as de,aC as ce,aD as _e,aE as he,aF as pe,aG as Ee,j as me}from"./CBFVa8s6.js";import{a as we,b as Y,r as xe}from"./6xKV-NYR.js";function Ce(r,a){return a}function Te(r,a,e){for(var f=r.items,v=[],o=a.length,u=0;u<o;u++)he(a[u].e,v,!0);var h=o>0&&v.length===0&&e!==null;if(h){var m=e.parentNode;pe(m),m.append(e),f.clear(),I(r,a[0].prev,a[o-1].next)}Ee(v,()=>{for(var _=0;_<o;_++){var E=a[_];h||(f.delete(E.k),I(r,E.prev,E.next)),X(E.e,!h)}})}function Me(r,a,e,f,v,o=null){var u=r,h={flags:a,items:new Map,first:null};{var m=r;u=N?H(W(m)):m.appendChild(B())}N&&P();var _=null,E=!1,C=new Map,n=ee(()=>{var l=e();return fe(l)?l:l==null?[]:G(l)}),c,s;function t(){Ie(s,c,h,C,u,v,a,f,e),o!==null&&(c.length===0?_?L(_):_=k(()=>o(u)):_!==null&&ve(_,()=>{_=null}))}Z(()=>{s??=me,c=K(n);var l=c.length;if(E&&l===0)return;E=l===0;let A=!1;if(N){var x=ae(u)===re;x!==(l===0)&&(u=V(),H(u),O(!1),A=!0)}if(N){for(var i=null,p,d=0;d<l;d++){if(b.nodeType===ne&&b.data===se){u=b,A=!0,O(!1);break}var g=c[d],T=f(g,d);p=F(b,h,i,null,g,T,d,v,a,e),h.items.set(T,p),i=p}l>0&&H(V())}if(N)l===0&&o&&(_=k(()=>o(u)));else if(te()){var M=new Set,w=le;for(d=0;d<l;d+=1){g=c[d],T=f(g,d);var y=h.items.get(T)??C.get(T);y?q(y,g,d):(p=F(null,h,null,null,g,T,d,v,a,e,!0),C.set(T,p)),M.add(T)}for(const[D,R]of h.items)M.has(D)||w.skipped_effects.add(R.e);w.add_callback(t)}else t();A&&O(!0),K(n)}),N&&(u=b)}function Ie(r,a,e,f,v,o,u,h,m){var _=a.length,E=e.items,C=e.first,n=C,c,s=null,t=[],l=[],A,x,i,p;for(p=0;p<_;p+=1){if(A=a[p],x=h(A,p),i=E.get(x),i===void 0){var d=f.get(x);if(d!==void 0){f.delete(x),E.set(x,d);var g=s?s.next:n;I(e,s,d),I(e,d,g),$(d,g,v),s=d}else{var T=n?n.e.nodes_start:v;s=F(T,e,s,s===null?e.first:s.next,A,x,p,o,u,m)}E.set(x,s),t=[],l=[],n=s.next;continue}if(q(i,A,p),(i.e.f&S)!==0&&L(i.e),i!==n){if(c!==void 0&&c.has(i)){if(t.length<l.length){var M=l[0],w;s=M.prev;var y=t[0],D=t[t.length-1];for(w=0;w<t.length;w+=1)$(t[w],M,v);for(w=0;w<l.length;w+=1)c.delete(l[w]);I(e,y.prev,D.next),I(e,s,y),I(e,D,M),n=M,s=D,p-=1,t=[],l=[]}else c.delete(i),$(i,n,v),I(e,i.prev,i.next),I(e,i,s===null?e.first:s.next),I(e,s,i),s=i;continue}for(t=[],l=[];n!==null&&n.k!==x;)(n.e.f&S)===0&&(c??=new Set).add(n),l.push(n),n=n.next;if(n===null)continue;i=n}t.push(i),s=i,n=i.next}if(n!==null||c!==void 0){for(var R=c===void 0?[]:G(c);n!==null;)(n.e.f&S)===0&&R.push(n),n=n.next;var J=R.length;if(J>0){var Q=_===0?v:null;Te(e,R,Q)}}r.first=e.first&&e.first.e,r.last=s&&s.e;for(var U of f.values())X(U.e);f.clear()}function q(r,a,e,f){ue(r.v,a),r.i=e}function F(r,a,e,f,v,o,u,h,m,_,E){var C=(m&de)!==0,n=(m&ce)===0,c=C?n?ie(v,!1,!1):j(v):v,s=(m&oe)===0?u:j(u),t={i:s,v:c,k:o,a:null,e:null,prev:e,next:f};try{if(r===null){var l=document.createDocumentFragment();l.append(r=B())}return t.e=k(()=>h(r,c,s,_),N),t.e.prev=e&&e.e,t.e.next=f&&f.e,e===null?E||(a.first=t):(e.next=t,e.e.next=t.e),f!==null&&(f.prev=t,f.e.prev=t.e),t}finally{}}function $(r,a,e){for(var f=r.next?r.next.e.nodes_start:e,v=a?a.e.nodes_start:e,o=r.e.nodes_start;o!==null&&o!==f;){var u=_e(o);v.before(o),o=u}}function I(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function z(r){return(we||Y)+r}function Ne(r,a){return Y+xe(r,a)}async function ye(r){const a=z(`/kanji/${r}.json`),e=await fetch(a);if(!e.ok)throw new Error(`Kanji ${r} not found`);return e.json()}async function De(r){const a=z(`/_indexes/${r}.json`),e=await fetch(a);if(!e.ok)throw new Error(`Index ${r} missing`);return e.json()}export{De as a,Me as e,Ce as i,ye as l,Ne as r};
